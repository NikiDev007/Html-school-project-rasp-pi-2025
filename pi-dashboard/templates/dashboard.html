<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>Pi Status Dashboard</header>

    <div class="NavBar">
        <a href="{{ url_for('index') }}">Startseite</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('view_logs') }}">Logs</a>
        <a href="{{ url_for('network_info') }}">Netzwerkübersicht</a>
    </div>
    <div class="main-content-wrapper">
        <div class="data-container">
            <a href="{{ url_for('cpu_temp_info') }}" class="info-link">
                <div class="data-box">
                    <h2>CPU-Temperatur</h2>
                    <span class="value" id="temp-value">...</span>
                </div>
            </a>

            <a href="{{ url_for('cpu_info') }}" class="info-link">
                <div class="data-box">
                    <h2>CPU-Auslastung</h2>
                    <span class="value" id="cpu-value">...</span>
                    <div class="bar-container">
                        <div class="progress-bar cpu-bar" id="cpu-bar" style="width: 0%"></div>
                    </div>
                </div>
            </a>

            <a href="{{ url_for('ram_info') }}" class="info-link">
                <div class="data-box">
                    <h2>RAM-Auslastung</h2>
                    <span class="value" id="ram-value">...</span>
                    <div class="bar-container">
                        <div class="progress-bar ram-bar" id="ram-bar" style="width: 0%"></div>
                    </div>
                </div>
            </a>

            <a href="{{ url_for('storage_disc_info') }}" class="info-link">
                <div class="data-box">
                    <h2>Festplatten-Speicher</h2>
                    <span class="value" id="disk-value">...</span>
                    <script>
                        async function updateDiskTile() {
                            try {
                                const response = await fetch('/api/storage_disc_info');
                                const data = await response.json();


                                const used = Object.values(data).reduce((a, b) => a + b, 0);
                                const total = 250; // 
                                const percent = Math.round((used / total) * 100);


                                document.getElementById('disk-value').innerText = percent + '%';
                                document.getElementById('disk-used').innerText = used + ' GB';
                                document.getElementById('disk-total').innerText = total + ' GB';


                                document.getElementById('disk-bar').style.width = percent + '%';

                            } catch (error) {
                                console.error("Daten konnten nicht geladen werden:", error);
                            }
                        }

                        document.addEventListener('DOMContentLoaded', updateDiskTile);
                    </script>
                    <p><span id="disk-used">...</span> / <span id="disk-total"></span></p>
                    <div class="bar-container">
                        <div class="progress-bar disk-bar" id="disk-bar" style="width: 0%"></div>
                    </div>
                </div>
            </a>

            <div class="stable-box">
                <h2>System-Laufzeit</h2>
                <span class="value" id="uptime-value">...</span>
            </div>
        </div>
    </div>
    <p id="status-message" style="margin-top: 30px;">Wird geladen...</p>

    <script src="{{ url_for('static', filename='status.js') }}"></script>
    <p><a href="{{ url_for('index') }}" class="action-link">Zurück zum Anfang</a></p>
</body>

</html>